# Telegram бот для приема отзывов

Telegram бот на Python, который принимает отзывы от пользователей и пересылает их администратору.

## Функционал

- Приветствие при старте
- Создание нового отзыва через инлайн-кнопку
- Прием текстовых сообщений и фотографий в рамках одного отзыва
- Завершение отзыва с отправкой администратору
- Благодарность пользователю после завершения отзыва

## Установка и запуск

### 1. Получение токена бота

1. Найдите [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

### 2. Получение ID администратора

1. Найдите [@userinfobot](https://t.me/userinfobot) в Telegram
2. Отправьте команду `/start`
3. Скопируйте ваш ID (число)

### 3. Настройка переменных окружения

Создайте файл `.env` на основе примера `env.example`:

**Windows (PowerShell):**
```powershell
Copy-Item env.example .env
```

**Linux/Mac:**
```bash
cp env.example .env
```

Отредактируйте `.env` и укажите:
- `BOT_TOKEN` - токен вашего бота
- `ADMIN_ID` - ваш Telegram ID

### 4. Запуск с Docker Compose

```bash
docker-compose up -d
```

### 5. Запуск без Docker

Установите зависимости:

```bash
pip install -r requirements.txt
```

Установите переменные окружения:

**Windows (PowerShell):**
```powershell
$env:BOT_TOKEN="your_bot_token"
$env:ADMIN_ID="your_admin_id"
```

**Linux/Mac:**
```bash
export BOT_TOKEN="your_bot_token"
export ADMIN_ID="your_admin_id"
```

Запустите бота:

```bash
python bot.py
```

## Использование

1. Найдите вашего бота в Telegram
2. Отправьте команду `/start`
3. Нажмите кнопку "Новый отзыв"
4. Отправляйте текстовые сообщения и/или фотографии
5. Нажмите "Завершить текущий отзыв" для отправки отзыва администратору

## Структура проекта

```
.
├── bot.py              # Основной код бота
├── requirements.txt    # Зависимости Python
├── Dockerfile          # Конфигурация Docker
├── docker-compose.yml  # Конфигурация Docker Compose
├── .env.example        # Пример файла с переменными окружения
└── README.md          # Документация
```

## Примечания

- В текущей реализации активные отзывы хранятся в памяти. При перезапуске бота незавершенные отзывы будут потеряны.
- Для продакшена рекомендуется использовать базу данных (например, PostgreSQL или SQLite) для хранения отзывов.
- Бот перезапускается автоматически при сбоях благодаря `restart: unless-stopped` в docker-compose.yml.

